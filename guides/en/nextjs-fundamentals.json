{
  "title": "Next.js Fundamentals: The React Framework",
  "description": "From minimal framework (2016) to full-stack platform (2025) - App Router, Server Components, and production-ready deployment",
  "steps": [
    {
      "name": "History & Setup",
      "slides": [
        0,
        1,
        2,
        3,
        4,
        5
      ]
    },
    {
      "name": "App Router",
      "slides": [
        6,
        7,
        8,
        9,
        10,
        11
      ]
    },
    {
      "name": "Routing & Navigation",
      "slides": [
        12,
        13,
        14,
        15,
        16,
        17
      ]
    },
    {
      "name": "Server vs Client",
      "slides": [
        18,
        19,
        20,
        21,
        22,
        23
      ]
    },
    {
      "name": "Data Fetching",
      "slides": [
        24,
        25,
        26,
        27,
        28,
        29
      ]
    },
    {
      "name": "Server Actions",
      "slides": [
        30,
        31,
        32,
        33,
        34
      ]
    },
    {
      "name": "Styling",
      "slides": [
        35,
        36,
        37,
        38,
        39
      ]
    },
    {
      "name": "Performance",
      "slides": [
        40,
        41,
        42,
        43,
        44,
        45
      ]
    },
    {
      "name": "Metadata & SEO",
      "slides": [
        46,
        47,
        48,
        49
      ]
    },
    {
      "name": "Deployment",
      "slides": [
        50,
        51,
        52,
        53
      ]
    },
    {
      "name": "Next.js 16",
      "slides": [
        54,
        55,
        56,
        57,
        58
      ]
    },
    {
      "name": "Best Practices",
      "slides": [
        59,
        60,
        61
      ]
    }
  ],
  "slides": [
    {
      "type": "title",
      "title": "Next.js Fundamentals",
      "subtitle": "The React Framework for Production",
      "description": "From Vercel (2016) to Next.js 16 (2025) - Server Components, App Router, and full-stack magic",
      "ironicClosing": "Next.js: React but production-ready out-of-the-box. Black magic or best practices? Both."
    },
    {
      "type": "text",
      "title": "üìú The History of Next.js",
      "paragraphs": [
        "<strong>2016:</strong> Vercel (formerly ZEIT) creates Next.js - \"React with easy SSR\"",
        "<strong>2017:</strong> Next.js 3 - Dynamic imports, static exports",
        "<strong>2018:</strong> Next.js 7 - DX improvements, Webpack 4",
        "<strong>2019:</strong> Next.js 9 - API routes (backend in the frontend!), automatic static optimization",
        "<strong>2020:</strong> Next.js 10 - Image optimization, i18n routing, Analytics",
        "<strong>2021:</strong> Next.js 12 - Middleware, React 18, SWC compiler (Rust-based, 3x faster)",
        "<strong>2022:</strong> Next.js 13 - <strong>App Router</strong> (revolution), Turbopack beta, Server Components",
        "<strong>2023:</strong> Next.js 14 - Server Actions stable, Partial Prerendering",
        "<strong>2024:</strong> Next.js 15 - React 19, stable Turbopack for dev, async Request APIs",
        "<strong>2025 (October):</strong> Next.js 16 - Cache Components, Turbopack stable production, React Compiler",
        "",
        "<strong>Today:</strong> Most popular React framework. Used by: TikTok, Twitch, Notion, Hulu, Nike"
      ],
      "ironicClosing": "From 'React with SSR' to 'full-stack framework'. Well-executed ambitious creep."
    },
    {
      "type": "text",
      "title": "üöÄ Next.js 16 (2025) - Latest",
      "paragraphs": [
        "<strong>Cache Components (opt-in caching)</strong>",
        "‚Ä¢ Explicit caching with Partial Pre-Rendering (PPR)",
        "‚Ä¢ use cache directive for granular control",
        "‚Ä¢ Dynamic by default, cache only when needed",
        "",
        "<strong>Turbopack Stable (Production)</strong>",
        "‚Ä¢ Default bundler for dev and production",
        "‚Ä¢ File system caching beta - ultra-fast startup",
        "‚Ä¢ Written in Rust, up to 700x faster than Webpack",
        "",
        "<strong>React Compiler (Built-in)</strong>",
        "‚Ä¢ Automatic memoization - no more manual useMemo/useCallback",
        "‚Ä¢ Compile-time optimizations for re-render",
        "",
        "<strong>Enhanced Routing</strong>",
        "‚Ä¢ Optimized navigation, intelligent prefetching",
        "‚Ä¢ New APIs: updateTag(), refresh(), revalidateTag()",
        "",
        "<strong>React 19.2</strong>",
        "‚Ä¢ View Transitions, useEffectEvent(), <Activity/> component"
      ],
      "ironicClosing": "Next.js 16: Turbopack everywhere, opt-in cache, React Compiler. Developer happiness level: max."
    },
    {
      "type": "text",
      "title": "Why Next.js?",
      "paragraphs": [
        "<strong>React, but better:</strong> Built-in Routing, SSR, SSG, ISR (no config hell)",
        "<strong>Full-stack:</strong> API routes, Server Actions, database queries directly in components",
        "<strong>Performance:</strong> Image optimization, font optimization, automatic code splitting",
        "<strong>SEO-friendly:</strong> Server-side rendering, metadata API, sitemap generation",
        "<strong>Developer Experience:</strong> Fast Refresh, first-class TypeScript, incredible error overlay",
        "<strong>Deployment:</strong> Vercel (zero config), but also self-hosted anywhere",
        "",
        "<strong>Alternatives (and why Next.js wins):</strong>",
        "‚Ä¢ <strong>Create React App:</strong> Deprecated, Next.js is the official successor",
        "‚Ä¢ <strong>Remix:</strong> Great, but the Next.js ecosystem is bigger.",
        "‚Ä¢ <strong>Gatsby:</strong> Only SSG, Next.js does it all (SSG + SSR + ISR)",
        "",
        "<strong>Use cases:</strong> Landing pages, e-commerce, dashboards, blogs, SaaS, everything"
      ],
      "ironicClosing": "Next.js: the framework that makes CRA look like a toy. RIP CRA, 2016-2023."
    },
    {
      "type": "text",
      "title": "Setup: Create Next.js Project",
      "paragraphs": [
        "<strong>Prerequisites:</strong>",
        "‚Ä¢ Node.js 18.18+ (recommended LTS)",
        "‚Ä¢ npm, pnpm, or yarn",
        "",
        "<strong>Create Next App (redesigned in v16):</strong>",
        "<code>npx create-next-app@latest my-app</code>",
        "",
        "<strong>Options during setup:</strong>",
        "‚Ä¢ TypeScript? <strong>Yes</strong> (recommended)",
        "‚Ä¢ ESLint? <strong>Yes</strong>",
        "‚Ä¢ Tailwind CSS? <strong>Yes</strong> (very popular)",
        "‚Ä¢ src/ directory? <strong>No</strong> (personal preference)",
        "‚Ä¢ App Router? <strong>Yes</strong> (default, modern)",
        "‚Ä¢ Turbopack? <strong>Yes</strong> (stable in v16)",
        "",
        "<strong>Start dev server:</strong>",
        "<code>cd my-app</code>",
        "<code>npm run dev</code>",
        "Open <code>http://localhost:3000</code>"
      ],
      "ironicClosing": "create-next-app: from zero to full-stack app in 30 seconds. Magic or excellent tooling? Yes."
    },
    {
      "type": "code",
      "title": "üíª Next.js 16 Project Structure",
      "code": {
        "language": "plaintext",
        "snippet": "my-app/\n‚îú‚îÄ‚îÄ app/                    # App Router (Next.js 13+)\n‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx         # Root layout (wrapper globale)\n‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # Homepage (route: /)\n‚îÇ   ‚îú‚îÄ‚îÄ globals.css        # CSS globale\n‚îÇ   ‚îú‚îÄ‚îÄ about/\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx       # Route: /about\n‚îÇ   ‚îú‚îÄ‚îÄ blog/\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx       # Route: /blog\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [slug]/\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx   # Route dinamica: /blog/post-1\n‚îÇ   ‚îî‚îÄ‚îÄ api/\n‚îÇ       ‚îî‚îÄ‚îÄ users/\n‚îÇ           ‚îî‚îÄ‚îÄ route.ts   # API route: /api/users\n‚îú‚îÄ‚îÄ public/                # File statici (serviti da /)\n‚îÇ   ‚îú‚îÄ‚îÄ images/\n‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico\n‚îú‚îÄ‚îÄ components/            # Componenti riusabili\n‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx\n‚îÇ   ‚îî‚îÄ‚îÄ Footer.tsx\n‚îú‚îÄ‚îÄ lib/                   # Utilities, helpers\n‚îÇ   ‚îî‚îÄ‚îÄ db.ts\n‚îú‚îÄ‚îÄ next.config.mjs        # Configurazione Next.js\n‚îú‚îÄ‚îÄ package.json\n‚îî‚îÄ‚îÄ tsconfig.json"
      },
      "explanation": "app/ is the heart. Each folder = route. page.tsx = UI. layout.tsx = wrapper."
    },
    {
      "type": "title",
      "title": "App Router",
      "subtitle": "The new way of routing in Next.js",
      "description": "From Pages Router (legacy) to App Router (modern) - Server Components by default"
    },
    {
      "type": "text",
      "title": "App Router vs Pages Router",
      "paragraphs": [
        "<strong>Pages Router (legacy, Next.js ‚â§12):</strong>",
        "‚Ä¢ Directory: <code>pages/</code>",
        "‚Ä¢ File-based routing: <code>pages/about.tsx</code> ‚Üí <code>/about</code>",
        "‚Ä¢ Client Components by default",
        "‚Ä¢ getServerSideProps, getStaticProps for data fetching",
        "‚Ä¢ Still supported, but not recommended for new projects",
        "",
        "<strong>App Router (modern, Next.js 13+):</strong>",
        "‚Ä¢ Directory: <code>app/</code>",
        "‚Ä¢ Folder-based routing: <code>app/about/page.tsx</code> ‚Üí <code>/about</code>",
        "‚Ä¢ <strong>Server Components by default</strong> (game changer)",
        "‚Ä¢ async/await directly in components for data fetching",
        "‚Ä¢ Built-in layouts, loading states, error boundaries",
        "‚Ä¢ React 18+ features (Suspense, Streaming)",
        "",
        "<strong>Migration:</strong> Gradual. You can use both (but do not mix in the same route)"
      ],
      "ironicClosing": "Pages Router: comfort zone. App Router: future-proof. Choose wisely (App Router)."
    },
    {
      "type": "code",
      "title": "üíª File Conventions in the App Router",
      "code": {
        "language": "plaintext",
        "snippet": "app/\n‚îú‚îÄ‚îÄ layout.tsx        # Layout condiviso (wrapper)\n‚îú‚îÄ‚îÄ page.tsx          # Pagina (UI della route)\n‚îú‚îÄ‚îÄ loading.tsx       # Loading UI (Suspense boundary)\n‚îú‚îÄ‚îÄ error.tsx         # Error UI (Error boundary)\n‚îú‚îÄ‚îÄ not-found.tsx     # 404 UI\n‚îú‚îÄ‚îÄ route.ts          # API route (GET, POST, etc.)\n‚îî‚îÄ‚îÄ template.tsx      # Template (re-monta ad ogni navigazione)\n\n# Esempi:\napp/\n‚îú‚îÄ‚îÄ layout.tsx        # Root layout (obbligatorio)\n‚îú‚îÄ‚îÄ page.tsx          # Homepage: /\n‚îú‚îÄ‚îÄ dashboard/\n‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx    # Layout per /dashboard/*\n‚îÇ   ‚îú‚îÄ‚îÄ page.tsx      # /dashboard\n‚îÇ   ‚îú‚îÄ‚îÄ loading.tsx   # Loading per /dashboard\n‚îÇ   ‚îî‚îÄ‚îÄ settings/\n‚îÇ       ‚îî‚îÄ‚îÄ page.tsx  # /dashboard/settings\n‚îî‚îÄ‚îÄ blog/\n    ‚îú‚îÄ‚îÄ [slug]/\n    ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx  # Dynamic: /blog/hello-world\n    ‚îî‚îÄ‚îÄ [...slug]/\n        ‚îî‚îÄ‚îÄ page.tsx  # Catch-all: /blog/a/b/c"
      },
      "explanation": "layout.tsx is sticky (does not re-mount). page.tsx is a route. Special files for loading/error."
    },
    {
      "type": "code",
      "title": "üíª Root Layout (mandatory)",
      "code": {
        "language": "typescript",
        "snippet": "// app/layout.tsx\nimport './globals.css'\n\nexport const metadata = {\n  title: 'My Next.js App',\n  description: 'Built with Next.js 16',\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"en\">\n      <body>\n        {/* Header globale */}\n        <header>\n          <nav>Navigation</nav>\n        </header>\n        \n        {/* Contenuto della pagina */}\n        <main>{children}</main>\n        \n        {/* Footer globale */}\n        <footer>\n          <p>&copy; 2025 My App</p>\n        </footer>\n      </body>\n    </html>\n  )\n}"
      },
      "explanation": "Root layout wraps everything. It must have <html> and <body>. Metadata for SEO."
    },
    {
      "type": "code",
      "title": "üíª Page Component",
      "code": {
        "language": "typescript",
        "snippet": "// app/page.tsx (Homepage)\nexport default function HomePage() {\n  return (\n    <div>\n      <h1>Welcome to Next.js 16</h1>\n      <p>Server Component by default!</p>\n    </div>\n  )\n}\n\n// app/about/page.tsx\nexport default function AboutPage() {\n  return (\n    <div>\n      <h1>About Us</h1>\n      <p>This is the about page</p>\n    </div>\n  )\n}\n\n// app/blog/[slug]/page.tsx (Dynamic route)\ntype Props = {\n  params: { slug: string }\n  searchParams: { [key: string]: string | string[] | undefined }\n}\n\nexport default function BlogPost({ params, searchParams }: Props) {\n  return (\n    <div>\n      <h1>Blog Post: {params.slug}</h1>\n      <p>Search params: {JSON.stringify(searchParams)}</p>\n    </div>\n  )\n}"
      },
      "explanation": "page.tsx exports default component. params for dynamic routes. searchParams for query."
    },
    {
      "type": "code",
      "title": "üíª Nested Layouts",
      "code": {
        "language": "typescript",
        "snippet": "// app/dashboard/layout.tsx\nexport default function DashboardLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <div className=\"dashboard\">\n      {/* Sidebar solo per /dashboard/* */}\n      <aside className=\"sidebar\">\n        <nav>\n          <a href=\"/dashboard\">Home</a>\n          <a href=\"/dashboard/analytics\">Analytics</a>\n          <a href=\"/dashboard/settings\">Settings</a>\n        </nav>\n      </aside>\n      \n      {/* Contenuto */}\n      <div className=\"content\">\n        {children}\n      </div>\n    </div>\n  )\n}\n\n// Struttura renderizzata:\n// <RootLayout>\n//   <DashboardLayout>\n//     <DashboardPage />\n//   </DashboardLayout>\n// </RootLayout>"
      },
      "explanation": "Nested layouts. Sidebar persists when navigating in /dashboard/*. High performance."
    },
    {
      "type": "code",
      "title": "üíª Loading & Error States",
      "code": {
        "language": "typescript",
        "snippet": "// app/dashboard/loading.tsx\nexport default function Loading() {\n  return (\n    <div className=\"loading-spinner\">\n      <p>Loading dashboard...</p>\n    </div>\n  )\n}\n\n// app/dashboard/error.tsx\n'use client' // Error components devono essere Client Components\n\nexport default function Error({\n  error,\n  reset,\n}: {\n  error: Error & { digest?: string }\n  reset: () => void\n}) {\n  return (\n    <div className=\"error\">\n      <h2>Something went wrong!</h2>\n      <p>{error.message}</p>\n      <button onClick={reset}>Try again</button>\n    </div>\n  )\n}\n\n// app/not-found.tsx\nexport default function NotFound() {\n  return (\n    <div>\n      <h1>404 - Page Not Found</h1>\n      <a href=\"/\">Go home</a>\n    </div>\n  )\n}"
      },
      "explanation": "loading.tsx for Suspense. error.tsx for Error Boundary. not-found.tsx for 404."
    },
    {
      "type": "title",
      "title": "Routing & Navigation",
      "subtitle": "Dynamic routes, route groups, parallel routes",
      "description": "Advanced routing and client-side navigation"
    },
    {
      "type": "code",
      "title": "üíª Dynamic Routes",
      "code": {
        "language": "typescript",
        "snippet": "// app/blog/[slug]/page.tsx - Dynamic segment\ntype Props = {\n  params: { slug: string }\n}\n\nexport default function BlogPost({ params }: Props) {\n  return <h1>Post: {params.slug}</h1>\n}\n// Routes: /blog/hello ‚Üí params.slug = 'hello'\n\n// app/shop/[category]/[product]/page.tsx - Multiple segments\ntype Props = {\n  params: { category: string; product: string }\n}\n\nexport default function Product({ params }: Props) {\n  return <h1>{params.category} - {params.product}</h1>\n}\n// Routes: /shop/electronics/laptop\n\n// app/docs/[...slug]/page.tsx - Catch-all\ntype Props = {\n  params: { slug: string[] }\n}\n\nexport default function Docs({ params }: Props) {\n  return <h1>Docs: {params.slug.join('/')}</h1>\n}\n// Routes: /docs/a/b/c ‚Üí params.slug = ['a', 'b', 'c']"
      },
      "explanation": "[slug] = dynamic. [...slug] = catch-all. [[...slug]] = optional catch-all."
    },
    {
      "type": "code",
      "title": "üíª Route Groups & Private Folders",
      "code": {
        "language": "plaintext",
        "snippet": "# Route Groups (parentesi) - non creano route\napp/\n‚îú‚îÄ‚îÄ (marketing)/       # Group (NO route)\n‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx    # Layout per marketing\n‚îÇ   ‚îú‚îÄ‚îÄ about/\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx  # Route: /about (NO /marketing/about)\n‚îÇ   ‚îî‚îÄ‚îÄ contact/\n‚îÇ       ‚îî‚îÄ‚îÄ page.tsx  # Route: /contact\n‚îî‚îÄ‚îÄ (shop)/           # Diverso layout\n    ‚îú‚îÄ‚îÄ layout.tsx    # Layout per shop\n    ‚îú‚îÄ‚îÄ products/\n    ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx  # Route: /products\n    ‚îî‚îÄ‚îÄ cart/\n        ‚îî‚îÄ‚îÄ page.tsx  # Route: /cart\n\n# Private Folders (underscore) - esclusi dal routing\napp/\n‚îú‚îÄ‚îÄ _lib/             # Private (non accessibile via URL)\n‚îÇ   ‚îî‚îÄ‚îÄ utils.ts\n‚îú‚îÄ‚îÄ _components/      # Private components\n‚îÇ   ‚îî‚îÄ‚îÄ Button.tsx\n‚îî‚îÄ‚îÄ dashboard/\n    ‚îî‚îÄ‚îÄ page.tsx      # Route: /dashboard (OK)\n\n# Usa route groups per layouts diversi senza cambiare URL"
      },
      "explanation": "(group) to organize without URL. _private to exclude from routing."
    },
    {
      "type": "code",
      "title": "üíª Navigation: Link & useRouter",
      "code": {
        "language": "typescript",
        "snippet": "// Link component (preferito - prefetching automatico)\nimport Link from 'next/link'\n\nexport default function Nav() {\n  return (\n    <nav>\n      <Link href=\"/\">Home</Link>\n      <Link href=\"/about\">About</Link>\n      <Link href=\"/blog/hello-world\">Blog Post</Link>\n      \n      {/* Prefetch disabilitato */}\n      <Link href=\"/heavy-page\" prefetch={false}>\n        Heavy Page\n      </Link>\n      \n      {/* Dynamic */}\n      <Link href={`/user/${userId}`}>\n        User Profile\n      </Link>\n    </nav>\n  )\n}\n\n// useRouter (programmatic navigation)\n'use client'\nimport { useRouter } from 'next/navigation'\n\nexport default function LoginButton() {\n  const router = useRouter()\n  \n  const handleLogin = async () => {\n    await login()\n    router.push('/dashboard')  // Navigate\n    router.refresh()           // Refresh server data\n  }\n  \n  return <button onClick={handleLogin}>Login</button>\n}"
      },
      "explanation": "Link for navigation (prefetch auto). useRouter for programmatic. Client Component only."
    },
    {
      "type": "code",
      "title": "üíª Parallel Routes & Intercepting",
      "code": {
        "language": "plaintext",
        "snippet": "# Parallel Routes (@folder) - render multipli nella stessa route\napp/\n‚îú‚îÄ‚îÄ @team/            # Named slot\n‚îÇ   ‚îî‚îÄ‚îÄ page.tsx\n‚îú‚îÄ‚îÄ @analytics/       # Named slot\n‚îÇ   ‚îî‚îÄ‚îÄ page.tsx\n‚îî‚îÄ‚îÄ layout.tsx        # Riceve entrambi\n\n// app/layout.tsx\nexport default function Layout({\n  children,\n  team,      // @team slot\n  analytics, // @analytics slot\n}: {\n  children: React.ReactNode\n  team: React.ReactNode\n  analytics: React.ReactNode\n}) {\n  return (\n    <div>\n      {children}\n      <div className=\"sidebar\">\n        {team}\n        {analytics}\n      </div>\n    </div>\n  )\n}\n\n# Intercepting Routes (.) - modale pattern\napp/\n‚îú‚îÄ‚îÄ feed/\n‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # /feed\n‚îî‚îÄ‚îÄ photo/\n    ‚îú‚îÄ‚îÄ [id]/\n    ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # /photo/123 (full page)\n    ‚îî‚îÄ‚îÄ (.)photo/\n        ‚îî‚îÄ‚îÄ [id]/\n            ‚îî‚îÄ‚îÄ page.tsx  # Intercept when navigating from /feed"
      },
      "explanation": "@slot for parallel routes. (.) to intercept (e.g.: modals). Advanced but powerful."
    },
    {
      "type": "code",
      "title": "üíª Middleware",
      "code": {
        "language": "typescript",
        "snippet": "// middleware.ts (root del progetto)\nimport { NextResponse } from 'next/server'\nimport type { NextRequest } from 'next/server'\n\nexport function middleware(request: NextRequest) {\n  // Auth check\n  const token = request.cookies.get('token')\n  \n  if (!token && request.nextUrl.pathname.startsWith('/dashboard')) {\n    return NextResponse.redirect(new URL('/login', request.url))\n  }\n  \n  // Add custom header\n  const response = NextResponse.next()\n  response.headers.set('x-custom-header', 'value')\n  \n  // Rewrite (internal redirect)\n  if (request.nextUrl.pathname === '/old-path') {\n    return NextResponse.rewrite(new URL('/new-path', request.url))\n  }\n  \n  return response\n}\n\n// Matcher: specifica quali route processare\nexport const config = {\n  matcher: [\n    '/dashboard/:path*',  // Tutte le /dashboard/*\n    '/api/:path*',        // Tutte le API\n    '/((?!_next/static|_next/image|favicon.ico).*)',  // Escludi static\n  ],\n}"
      },
      "explanation": "Middleware executes BEFORE rendering. Auth, redirects, rewrites, headers."
    },
    {
      "type": "code",
      "title": "üíª generateStaticParams (SSG)",
      "code": {
        "language": "typescript",
        "snippet": "// app/blog/[slug]/page.tsx\ntype Post = { slug: string; title: string; content: string }\n\n// Genera static paths at build time\nexport async function generateStaticParams() {\n  const posts = await fetchPosts() // Fetch da DB/API\n  \n  return posts.map((post) => ({\n    slug: post.slug,\n  }))\n}\n// Build genera: /blog/post-1, /blog/post-2, etc.\n\ntype Props = {\n  params: { slug: string }\n}\n\nexport default async function BlogPost({ params }: Props) {\n  const post = await fetchPost(params.slug)\n  \n  return (\n    <article>\n      <h1>{post.title}</h1>\n      <div>{post.content}</div>\n    </article>\n  )\n}\n\n// Opzionale: genera metadata\nexport async function generateMetadata({ params }: Props) {\n  const post = await fetchPost(params.slug)\n  return {\n    title: post.title,\n  }\n}"
      },
      "explanation": "generateStaticParams for SSG. Build-time generation. Perfect SEO, ultra fast."
    },
    {
      "type": "title",
      "title": "Server vs Client Components",
      "subtitle": "The key paradigm of Next.js App Router",
      "description": "Server Components by default, Client Components when needed"
    },
    {
      "type": "text",
      "title": "Server Components (default)",
      "paragraphs": [
        "<strong>What they are:</strong>",
        "‚Ä¢ Components that render <strong>only on the server</strong>",
        "‚Ä¢ Zero JavaScript sent to the client (smaller bundle)",
        "‚Ä¢ Direct access to backend (database, filesystem, API)",
        "",
        "<strong>Features:</strong>",
        "‚Ä¢ async/await directly in the component",
        "‚Ä¢ Fetch data without API routes",
        "‚Ä¢ Secure secrets (unexposed API keys)",
        "‚Ä¢ NO hooks (useState, useEffect, etc.)",
        "‚Ä¢ NO event handlers (onClick, onChange)",
        "‚Ä¢ NO browser APIs (window, localStorage)",
        "",
        "<strong>When to use:</strong>",
        "‚Ä¢ Fetch data",
        "‚Ä¢ Backend logic",
        "‚Ä¢ Large dependencies (do not affect client bundle)",
        "‚Ä¢ Contenuto statico/dinamico senza interattivit√†",
        "",
        "<strong>Default in App Router:</strong> All components are Server Components unless 'use client'"
      ],
      "ironicClosing": "Server Components: zero JS on the client. React but without React in the browser. Mind-blowing."
    },
    {
      "type": "text",
      "title": "Client Components",
      "paragraphs": [
        "<strong>What they are:</strong>",
        "‚Ä¢ Components that render on the server and rehydrate on the client",
        "‚Ä¢ JavaScript sent to the browser (bundle impact)",
        "‚Ä¢ Interattivit√†, hooks, event handlers",
        "",
        "<strong>How to declare them:</strong>",
        "‚Ä¢ <code>'use client'</code> at the top of the file",
        "‚Ä¢ Mandatory directive (explicit > implicit)",
        "",
        "<strong>Features:</strong>",
        "‚Ä¢ Hooks: useState, useEffect, useContext, etc.",
        "‚Ä¢ Event handlers: onClick, onChange, etc.",
        "‚Ä¢ Browser APIs: window, localStorage, etc.",
        "‚Ä¢ Third-party libraries with browser dependencies",
        "",
        "<strong>When to use:</strong>",
        "‚Ä¢ Interactivity (forms, buttons, modals)",
        "‚Ä¢ State management (useState, Zustand, Redux)",
        "‚Ä¢ Effects (useEffect)",
        "‚Ä¢ Browser-only features",
        "",
        "<strong>Best practice:</strong> Use Client Components as little as possible. Leaf components."
      ],
      "ironicClosing": "Client Components: Classic React. Server Components: React of the future. Choose wisely."
    },
    {
      "type": "code",
      "title": "üíª Server Component (default)",
      "code": {
        "language": "typescript",
        "snippet": "// app/posts/page.tsx\n// Server Component (NO 'use client')\nimport { db } from '@/lib/db'\n\n// async component - SOLO possibile in Server Components\nexport default async function PostsPage() {\n  // Direct database access (NO API route needed)\n  const posts = await db.post.findMany({\n    orderBy: { createdAt: 'desc' },\n  })\n  \n  return (\n    <div>\n      <h1>Blog Posts</h1>\n      <ul>\n        {posts.map((post) => (\n          <li key={post.id}>\n            <h2>{post.title}</h2>\n            <p>{post.excerpt}</p>\n          </li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\n// ‚úÖ Vantaggi:\n// - Zero JS al client\n// - Database query direttamente nel component\n// - Secrets sicuri (DB credentials mai esposte)\n// - SEO perfetto (HTML completo al first load)"
      },
      "explanation": "Server Component: async, database access, zero JS client. Default in the App Router."
    },
    {
      "type": "code",
      "title": "üíª Client Component",
      "code": {
        "language": "typescript",
        "snippet": "// components/LikeButton.tsx\n'use client' // ‚¨ÖÔ∏è Direttiva obbligatoria\n\nimport { useState } from 'react'\n\ntype Props = {\n  postId: string\n  initialLikes: number\n}\n\nexport default function LikeButton({ postId, initialLikes }: Props) {\n  const [likes, setLikes] = useState(initialLikes)\n  const [isLiked, setIsLiked] = useState(false)\n  \n  const handleLike = async () => {\n    setIsLiked(!isLiked)\n    setLikes(isLiked ? likes - 1 : likes + 1)\n    \n    // Call API\n    await fetch(`/api/posts/${postId}/like`, {\n      method: 'POST',\n    })\n  }\n  \n  return (\n    <button onClick={handleLike}>\n      {isLiked ? '‚ù§Ô∏è' : 'ü§ç'} {likes}\n    </button>\n  )\n}\n\n// ‚úÖ Client Component perch√©:\n// - useState (hook)\n// - onClick (event handler)\n// - Interattivit√†"
      },
      "explanation": "'use client' for interactivity. useState, onClick, etc. OK. JS sent to the browser."
    },
    {
      "type": "code",
      "title": "üíª Composition Pattern (Best Practice)",
      "code": {
        "language": "typescript",
        "snippet": "// app/posts/[id]/page.tsx (Server Component)\nimport LikeButton from '@/components/LikeButton' // Client Component\nimport { db } from '@/lib/db'\n\nexport default async function PostPage({ params }: { params: { id: string } }) {\n  // Server-side data fetching\n  const post = await db.post.findUnique({\n    where: { id: params.id },\n  })\n  \n  return (\n    <article>\n      {/* Server-rendered */}\n      <h1>{post.title}</h1>\n      <p>By {post.author} on {post.date}</p>\n      <div>{post.content}</div>\n      \n      {/* Client Component annidato */}\n      <LikeButton postId={post.id} initialLikes={post.likes} />\n    </article>\n  )\n}\n\n// ‚úÖ Pattern:\n// - Server Component per data fetching e layout\n// - Client Component SOLO per parti interattive (leaf)\n// - Minimizza JS bundle (solo LikeButton va al client)\n\n// ‚ùå EVITA:\n// - 'use client' su page.tsx intera (troppo JS al client)"
      },
      "explanation": "Composition: Server Component wraps Client. Minimizes bundle. Key best practice."
    },
    {
      "type": "code",
      "title": "üíª Passing Props: Server ‚Üí Client",
      "code": {
        "language": "typescript",
        "snippet": "// ‚úÖ CORRECT: Serializable props\n// app/page.tsx (Server)\nimport ClientComponent from './ClientComponent'\n\nexport default async function Page() {\n  const data = await fetchData()\n  \n  return (\n    <ClientComponent\n      title={data.title}           // ‚úÖ String\n      count={data.count}           // ‚úÖ Number\n      isActive={data.isActive}     // ‚úÖ Boolean\n      tags={data.tags}             // ‚úÖ Array\n      metadata={data.metadata}     // ‚úÖ Object (plain)\n    />\n  )\n}\n\n// ‚ùå WRONG: Non-serializable props\nexport default async function BadPage() {\n  return (\n    <ClientComponent\n      onClick={() => {}}           // ‚ùå Function (non-serializable)\n      date={new Date()}            // ‚ùå Date object\n      ref={myRef}                  // ‚ùå Ref\n    />\n  )\n}\n\n// ‚úÖ Workaround per funzioni: definisci nel Client Component\n// components/ClientComponent.tsx\n'use client'\nexport default function ClientComponent({ title }: { title: string }) {\n  const handleClick = () => { /* ... */ } // Definita qui\n  return <button onClick={handleClick}>{title}</button>\n}"
      },
      "explanation": "Server ‚Üí Client: only serializable props (JSON). No functions, Date, refs."
    },
    {
      "type": "text",
      "title": "‚ö†Ô∏è Common Server/Client Errors",
      "paragraphs": [
        "<strong>1. Hook in Server Component</strong>",
        "<code>useState</code> in component without 'use client' ‚Üí Error",
        "Fix: Add 'use client' or move logic to Client Component",
        "",
        "<strong>2. async Client Component</strong>",
        "async function in 'use client' component ‚Üí Not supported",
        "Fix: Use useEffect + fetch, or Server Component",
        "",
        "<strong>3. Import Client in Server without props</strong>",
        "Server Component imports Client ‚Üí OK",
        "Client Component imports Server ‚Üí ‚ùå Error",
        "",
        "<strong>4. Database query in Client Component</strong>",
        "Prisma/DB call in 'use client' ‚Üí Will fail (no backend access)",
        "Fix: Move to Server Component or use API route",
        "",
        "<strong>5. 'use client' too high up</strong>",
        "entire page.tsx with 'use client' ‚Üí Huge bundle",
        "Fix: Only interactive leaf components with 'use client'"
      ],
      "ironicClosing": "Server/Client boundary: confusing at first, natural afterwards. Like React Hooks in 2019."
    },
    {
      "type": "title",
      "title": "Data Fetching",
      "subtitle": "Fetch, cache, revalidate",
      "description": "Modern strategies for loading data in Next.js"
    },
    {
      "type": "text",
      "title": "Data Fetching in Next.js 16",
      "paragraphs": [
        "<strong>Server Components (preferred):</strong>",
        "‚Ä¢ async/await directly in the component",
        "‚Ä¢ native fetch() with built-in cache",
        "‚Ä¢ Direct database access (Prisma, Drizzle, etc.)",
        "",
        "<strong>Caching Strategy (Next.js 16 - opt-in):</strong>",
        "‚Ä¢ <strong>Default:</strong> Dynamic (no cache)",
        "‚Ä¢ <strong>use cache:</strong> Directive for explicit caching",
        "‚Ä¢ <strong>Revalidation:</strong> Time-based or on-demand",
        "",
        "<strong>Rendering strategies:</strong>",
        "‚Ä¢ <strong>Static (SSG):</strong> Build-time, infinite cache",
        "‚Ä¢ <strong>Dynamic (SSR):</strong> Request-time, always fresh",
        "‚Ä¢ <strong>ISR:</strong> Static + periodic revalidation",
        "‚Ä¢ <strong>Streaming:</strong> Progressive rendering (Suspense)",
        "",
        "<strong>Client Components:</strong>",
        "‚Ä¢ useEffect + fetch (classic)",
        "‚Ä¢ SWR or React Query (recommended)",
        "‚Ä¢ Fetch API routes"
      ],
      "ironicClosing": "Data fetching in Next.js: from complicated to 'await fetch()'. Developer happiness."
    },
    {
      "type": "code",
      "title": "üíª Server Component: Direct Fetch",
      "code": {
        "language": "typescript",
        "snippet": "// app/posts/page.tsx\nexport default async function PostsPage() {\n  // fetch con cache (Next.js 16 opt-in)\n  const res = await fetch('https://api.example.com/posts', {\n    next: { \n      revalidate: 3600, // ISR: revalidate ogni ora\n      tags: ['posts'],  // Tag per revalidation on-demand\n    }\n  })\n  const posts = await res.json()\n  \n  return (\n    <div>\n      {posts.map((post) => (\n        <article key={post.id}>\n          <h2>{post.title}</h2>\n        </article>\n      ))}\n    </div>\n  )\n}\n\n// Opzioni fetch:\n// { cache: 'force-cache' }        // Static (default pre-v16)\n// { cache: 'no-store' }           // Dynamic (no cache)\n// { next: { revalidate: 60 } }    // ISR (revalidate ogni 60s)\n// { next: { tags: ['products'] } } // Tag-based revalidation"
      },
      "explanation": "fetch() in Server Component. Options for caching. ISR with revalidate. Modern."
    },
    {
      "type": "code",
      "title": "üíª Database Access (Server Component)",
      "code": {
        "language": "typescript",
        "snippet": "// lib/db.ts (Prisma example)\nimport { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\n\nexport const db = globalForPrisma.prisma || new PrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db\n\n// app/users/page.tsx\nimport { db } from '@/lib/db'\n\nexport default async function UsersPage() {\n  // Direct database query (NO API route needed)\n  const users = await db.user.findMany({\n    select: {\n      id: true,\n      name: true,\n      email: true,\n    },\n    orderBy: {\n      createdAt: 'desc',\n    },\n  })\n  \n  return (\n    <div>\n      <h1>Users</h1>\n      <ul>\n        {users.map((user) => (\n          <li key={user.id}>{user.name} - {user.email}</li>\n        ))}\n      </ul>\n    </div>\n  )\n}"
      },
      "explanation": "Database directly in Server Component. No API route needed. Safe and fast."
    },
    {
      "type": "code",
      "title": "üíª Parallel Data Fetching",
      "code": {
        "language": "typescript",
        "snippet": "// app/dashboard/page.tsx\nexport default async function Dashboard() {\n  // ‚ùå Sequential (lento)\n  const user = await fetchUser()\n  const posts = await fetchPosts()     // Aspetta user\n  const comments = await fetchComments() // Aspetta posts\n  // Tempo totale: T1 + T2 + T3\n  \n  // ‚úÖ Parallel (veloce)\n  const [user, posts, comments] = await Promise.all([\n    fetchUser(),\n    fetchPosts(),\n    fetchComments(),\n  ])\n  // Tempo totale: max(T1, T2, T3)\n  \n  return (\n    <div>\n      <UserProfile user={user} />\n      <PostsList posts={posts} />\n      <CommentsList comments={comments} />\n    </div>\n  )\n}\n\n// Helper functions\nasync function fetchUser() {\n  const res = await fetch('https://api.example.com/user')\n  return res.json()\n}\n\nasync function fetchPosts() {\n  const res = await fetch('https://api.example.com/posts')\n  return res.json()\n}"
      },
      "explanation": "Promise.all for parallel fetching. Much faster. Important best practice."
    },
    {
      "type": "code",
      "title": "üíª Streaming with Suspense",
      "code": {
        "language": "typescript",
        "snippet": "// app/dashboard/page.tsx\nimport { Suspense } from 'react'\nimport SlowComponent from './SlowComponent'\nimport FastComponent from './FastComponent'\n\nexport default function Dashboard() {\n  return (\n    <div>\n      {/* Render subito */}\n      <h1>Dashboard</h1>\n      \n      {/* Fast component - render subito */}\n      <FastComponent />\n      \n      {/* Slow component - streaming */}\n      <Suspense fallback={<div>Loading slow data...</div>}>\n        <SlowComponent />\n      </Suspense>\n    </div>\n  )\n}\n\n// SlowComponent.tsx (Server Component)\nexport default async function SlowComponent() {\n  // Query lenta (3 secondi)\n  const data = await fetch('https://slow-api.com/data', {\n    cache: 'no-store',\n  })\n  const result = await data.json()\n  \n  return <div>{result.content}</div>\n}\n\n// ‚úÖ Risultato:\n// 1. HTML inziale: <h1> + FastComponent + fallback\n// 2. Stream SlowComponent quando pronto\n// 3. User vede contenuto progressivamente (no blocking)"
      },
      "explanation": "Suspense + async Server Component = streaming. Progressive rendering. Excellent UX."
    },
    {
      "type": "code",
      "title": "üíª Client-Side Fetching (SWR)",
      "code": {
        "language": "typescript",
        "snippet": "// components/Posts.tsx\n'use client'\n\nimport useSWR from 'swr'\n\nconst fetcher = (url: string) => fetch(url).then((r) => r.json())\n\nexport default function Posts() {\n  const { data, error, isLoading } = useSWR(\n    '/api/posts',\n    fetcher,\n    {\n      revalidateOnFocus: true,    // Revalidate quando tab torna in focus\n      revalidateOnReconnect: true, // Revalidate quando riconnette\n      refreshInterval: 30000,      // Poll ogni 30s\n    }\n  )\n  \n  if (error) return <div>Failed to load</div>\n  if (isLoading) return <div>Loading...</div>\n  \n  return (\n    <ul>\n      {data.map((post) => (\n        <li key={post.id}>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\n// Alternative: React Query (TanStack Query)\n// import { useQuery } from '@tanstack/react-query'\n// const { data, isLoading } = useQuery({\n//   queryKey: ['posts'],\n//   queryFn: () => fetch('/api/posts').then(r => r.json())\n// })"
      },
      "explanation": "SWR for client-side fetching. Cache, revalidation, focus refetch. Very convenient."
    },
    {
      "type": "code",
      "title": "üíª Revalidation: On-Demand",
      "code": {
        "language": "typescript",
        "snippet": "// app/api/revalidate/route.ts\nimport { revalidatePath, revalidateTag } from 'next/cache'\nimport { NextRequest } from 'next/server'\n\nexport async function POST(request: NextRequest) {\n  const secret = request.nextUrl.searchParams.get('secret')\n  \n  // Verify secret\n  if (secret !== process.env.REVALIDATE_SECRET) {\n    return Response.json({ message: 'Invalid secret' }, { status: 401 })\n  }\n  \n  // Revalidate specific path\n  revalidatePath('/posts')\n  \n  // O revalidate by tag\n  revalidateTag('posts')\n  \n  return Response.json({ revalidated: true })\n}\n\n// Usage: chiamare da webhook (es: CMS update)\n// POST https://myapp.com/api/revalidate?secret=xxx\n\n// Server Action (alternativa)\nexport async function revalidatePost() {\n  'use server'\n  revalidateTag('posts')\n}\n\n// In component:\n// <form action={revalidatePost}>\n//   <button type=\"submit\">Refresh Posts</button>\n// </form>"
      },
      "explanation": "revalidatePath/Tag for on-demand revalidation. Webhook, server actions, API."
    },
    {
      "type": "title",
      "title": "Server Actions",
      "subtitle": "Mutations without API routes",
      "description": "Forms, mutations, RPC-style functions server-side"
    },
    {
      "type": "text",
      "title": "What are Server Actions?",
      "paragraphs": [
        "<strong>Server Actions (Next.js 14+ stable):</strong>",
        "‚Ä¢ Asynchronous functions that run on the server",
        "‚Ä¢ Calls from Client Components (forms, buttons)",
        "‚Ä¢ <strong>No API routes needed</strong> for mutations",
        "‚Ä¢ Built-in security (CSRF protection)",
        "‚Ä¢ Progressive enhancement (they work without JS)",
        "",
        "<strong>Features:</strong>",
        "‚Ä¢ Directive <code>'use server'</code> (file or function)",
        "‚Ä¢ async by default",
        "‚Ä¢ Return types serializable",
        "‚Ä¢ Automatic request deduplication",
        "",
        "<strong>Use cases:</strong>",
        "‚Ä¢ Form submissions",
        "‚Ä¢ Database mutations (INSERT, UPDATE, DELETE)",
        "‚Ä¢ Revalidation after mutation",
        "‚Ä¢ File uploads",
        "‚Ä¢ Email sending",
        "",
        "<strong>Advantages:</strong>",
        "‚Ä¢ Less boilerplate (no API routes)",
        "‚Ä¢ Type-safe (TypeScript end-to-end)",
        "‚Ä¢ Progressive enhancement"
      ],
      "ironicClosing": "Server Actions: RPC in React. Backend in the frontend. Confusing? Yes. Game-changing? Also yes."
    },
    {
      "type": "code",
      "title": "üíª Server Action: Form Submission",
      "code": {
        "language": "typescript",
        "snippet": "// app/actions.ts\n'use server' // ‚¨ÖÔ∏è Tutto il file √® server-side\n\nimport { db } from '@/lib/db'\nimport { revalidatePath } from 'next/cache'\n\nexport async function createPost(formData: FormData) {\n  // Extract form data\n  const title = formData.get('title') as string\n  const content = formData.get('content') as string\n  \n  // Validation\n  if (!title || !content) {\n    return { error: 'Missing fields' }\n  }\n  \n  // Database mutation\n  const post = await db.post.create({\n    data: { title, content },\n  })\n  \n  // Revalidate cache\n  revalidatePath('/posts')\n  \n  return { success: true, post }\n}\n\n// app/posts/new/page.tsx\nimport { createPost } from '@/app/actions'\n\nexport default function NewPost() {\n  return (\n    <form action={createPost}>\n      <input name=\"title\" required />\n      <textarea name=\"content\" required />\n      <button type=\"submit\">Create Post</button>\n    </form>\n  )\n}"
      },
      "explanation": "'use server' for Server Actions. FormData auto-parsed. No API route needed."
    },
    {
      "type": "code",
      "title": "üíª Server Action: With useFormState",
      "code": {
        "language": "typescript",
        "snippet": "// app/actions.ts\n'use server'\nimport { db } from '@/lib/db'\n\nexport async function createUser(prevState: any, formData: FormData) {\n  const name = formData.get('name') as string\n  const email = formData.get('email') as string\n  \n  // Validation\n  if (!email.includes('@')) {\n    return { error: 'Invalid email' }\n  }\n  \n  try {\n    const user = await db.user.create({\n      data: { name, email },\n    })\n    return { success: true, user }\n  } catch (error) {\n    return { error: 'Failed to create user' }\n  }\n}\n\n// components/UserForm.tsx\n'use client'\nimport { useFormState } from 'react-dom'\nimport { createUser } from '@/app/actions'\n\nexport default function UserForm() {\n  const [state, formAction] = useFormState(createUser, null)\n  \n  return (\n    <form action={formAction}>\n      <input name=\"name\" required />\n      <input name=\"email\" type=\"email\" required />\n      <button type=\"submit\">Create User</button>\n      \n      {state?.error && <p className=\"error\">{state.error}</p>}\n      {state?.success && <p className=\"success\">User created!</p>}\n    </form>\n  )\n}"
      },
      "explanation": "useFormState for state management. Errors, successes, pending state."
    },
    {
      "type": "code",
      "title": "üíª Server Action: Inline",
      "code": {
        "language": "typescript",
        "snippet": "// app/posts/[id]/page.tsx\nimport { db } from '@/lib/db'\nimport { revalidatePath } from 'next/cache'\n\nexport default async function PostPage({ params }: { params: { id: string } }) {\n  const post = await db.post.findUnique({ where: { id: params.id } })\n  \n  // Inline Server Action\n  async function deletePost() {\n    'use server' // ‚¨ÖÔ∏è Singola funzione server-side\n    \n    await db.post.delete({ where: { id: params.id } })\n    revalidatePath('/posts')\n    redirect('/posts')\n  }\n  \n  return (\n    <article>\n      <h1>{post.title}</h1>\n      <p>{post.content}</p>\n      \n      <form action={deletePost}>\n        <button type=\"submit\">Delete Post</button>\n      </form>\n    </article>\n  )\n}\n\n// ‚úÖ Vantaggi inline:\n// - Closure su params (accesso a params.id)\n// - Collocazione logica (vicino al component)\n\n// ‚ùå Svantaggi:\n// - Non riusabile\n// - Testing pi√π difficile"
      },
      "explanation": "Server Action inline with 'use server' in the function. Closure on external scope."
    },
    {
      "type": "code",
      "title": "üíª Server Action: Programmatic Call",
      "code": {
        "language": "typescript",
        "snippet": "// app/actions.ts\n'use server'\nimport { db } from '@/lib/db'\n\nexport async function likePost(postId: string) {\n  const post = await db.post.update({\n    where: { id: postId },\n    data: { likes: { increment: 1 } },\n  })\n  return post.likes\n}\n\n// components/LikeButton.tsx\n'use client'\nimport { likePost } from '@/app/actions'\nimport { useState, useTransition } from 'react'\n\nexport default function LikeButton({ postId, initialLikes }: Props) {\n  const [likes, setLikes] = useState(initialLikes)\n  const [isPending, startTransition] = useTransition()\n  \n  const handleLike = () => {\n    startTransition(async () => {\n      const newLikes = await likePost(postId)\n      setLikes(newLikes)\n    })\n  }\n  \n  return (\n    <button onClick={handleLike} disabled={isPending}>\n      {isPending ? 'Liking...' : `‚ù§Ô∏è ${likes}`}\n    </button>\n  )\n}\n\n// useTransition per UI feedback (isPending)\n// Server Action chiamata programmatically (non solo form)"
      },
      "explanation": "Server Actions called by onClick. useTransition for pending state. Type-safe."
    },
    {
      "type": "code",
      "title": "üíª Server Action: Validation (Zod)",
      "code": {
        "language": "typescript",
        "snippet": "// app/actions.ts\n'use server'\nimport { z } from 'zod'\nimport { db } from '@/lib/db'\n\n// Schema validation\nconst createPostSchema = z.object({\n  title: z.string().min(3).max(100),\n  content: z.string().min(10),\n  published: z.boolean().default(false),\n})\n\nexport async function createPost(formData: FormData) {\n  // Parse and validate\n  const result = createPostSchema.safeParse({\n    title: formData.get('title'),\n    content: formData.get('content'),\n    published: formData.get('published') === 'on',\n  })\n  \n  // Validation errors\n  if (!result.success) {\n    return {\n      error: result.error.flatten().fieldErrors,\n    }\n  }\n  \n  // Type-safe data\n  const { title, content, published } = result.data\n  \n  // Create post\n  const post = await db.post.create({\n    data: { title, content, published },\n  })\n  \n  return { success: true, post }\n}\n\n// Zod garantisce type safety + validation runtime"
      },
      "explanation": "Zod for validation. safeParse for detailed errors. Type-safe after validation."
    },
    {
      "type": "title",
      "title": "Styling",
      "subtitle": "CSS Modules, Tailwind, CSS-in-JS",
      "description": "All the styling options in Next.js"
    },
    {
      "type": "text",
      "title": "Styling Options in Next.js",
      "paragraphs": [
        "<strong>1. CSS Modules (built-in, recommended)</strong>",
        "‚Ä¢ File: <code>Component.module.css</code>",
        "‚Ä¢ Automatically scoped (no conflicts)",
        "‚Ä¢ Zero config, optimized for production",
        "",
        "<strong>2. Tailwind CSS (most popular)</strong>",
        "‚Ä¢ Utility-first CSS framework",
        "‚Ä¢ Automatic setup with create-next-app",
        "‚Ä¢ Automatic purge (only classes used in bundle)",
        "",
        "<strong>3. Global CSS</strong>",
        "‚Ä¢ File: <code>app/globals.css</code>",
        "‚Ä¢ Import only in root layout",
        "‚Ä¢ For reset, global variables, utilities",
        "",
        "<strong>4. CSS-in-JS (styled-components, emotion)</strong>",
        "‚Ä¢ Support, but requires 'use client'",
        "‚Ä¢ Performance hit (runtime styles)",
        "‚Ä¢ Less recommended in App Router",
        "",
        "<strong>5. Sass/SCSS (built-in)</strong>",
        "‚Ä¢ <code>npm install sass</code>",
        "‚Ä¢ File: <code>.scss</code> or <code>.module.scss</code>"
      ],
      "ironicClosing": "Styling: CSS Modules for purists, Tailwind for pragmatists. Choose and move on."
    },
    {
      "type": "code",
      "title": "üíª CSS Modules",
      "code": {
        "language": "typescript",
        "snippet": "// components/Button.module.css\n.button {\n  padding: 12px 24px;\n  border-radius: 8px;\n  background: #0070f3;\n  color: white;\n  border: none;\n  cursor: pointer;\n}\n\n.button:hover {\n  background: #0051cc;\n}\n\n.primary {\n  background: #0070f3;\n}\n\n.secondary {\n  background: #6b7280;\n}\n\n// components/Button.tsx\nimport styles from './Button.module.css'\n\ntype Props = {\n  variant?: 'primary' | 'secondary'\n  children: React.ReactNode\n}\n\nexport default function Button({ variant = 'primary', children }: Props) {\n  return (\n    <button className={`${styles.button} ${styles[variant]}`}>\n      {children}\n    </button>\n  )\n}\n\n// Compiled: .button_abc123 (hash unico, no conflicts)"
      },
      "explanation": "CSS Modules: scoped, type-safe (with TypeScript), zero runtime. Solid choice."
    },
    {
      "type": "code",
      "title": "üíª Tailwind CSS",
      "code": {
        "language": "typescript",
        "snippet": "// tailwind.config.ts (auto-generato)\nimport type { Config } from 'tailwindcss'\n\nconst config: Config = {\n  content: [\n    './app/**/*.{js,ts,jsx,tsx,mdx}',\n    './components/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: '#0070f3',\n      },\n    },\n  },\n  plugins: [],\n}\nexport default config\n\n// components/Button.tsx\ntype Props = {\n  variant?: 'primary' | 'secondary'\n  children: React.ReactNode\n}\n\nexport default function Button({ variant = 'primary', children }: Props) {\n  const baseStyles = 'px-6 py-3 rounded-lg font-semibold'\n  const variants = {\n    primary: 'bg-blue-600 hover:bg-blue-700 text-white',\n    secondary: 'bg-gray-600 hover:bg-gray-700 text-white',\n  }\n  \n  return (\n    <button className={`${baseStyles} ${variants[variant]}`}>\n      {children}\n    </button>\n  )\n}"
      },
      "explanation": "Tailwind: utility classes. Automatic purge. Popular, quick to write."
    },
    {
      "type": "code",
      "title": "üíª Global CSS & CSS Variables",
      "code": {
        "language": "css",
        "snippet": "/* app/globals.css */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --primary-color: #0070f3;\n  --secondary-color: #6b7280;\n  --background: #ffffff;\n  --foreground: #000000;\n  --border-radius: 8px;\n}\n\n@media (prefers-color-scheme: dark) {\n  :root {\n    --background: #000000;\n    --foreground: #ffffff;\n  }\n}\n\n* {\n  box-sizing: border-box;\n  padding: 0;\n  margin: 0;\n}\n\nhtml,\nbody {\n  max-width: 100vw;\n  overflow-x: hidden;\n}\n\nbody {\n  color: var(--foreground);\n  background: var(--background);\n}\n\na {\n  color: inherit;\n  text-decoration: none;\n}"
      },
      "explanation": "globals.css for reset, variables, dark mode. Import only in root layout."
    },
    {
      "type": "code",
      "title": "üíª Styled Components (CSS-in-JS)",
      "code": {
        "language": "typescript",
        "snippet": "// lib/registry.tsx (required for App Router)\n'use client'\n\nimport React, { useState } from 'react'\nimport { useServerInsertedHTML } from 'next/navigation'\nimport { ServerStyleSheet, StyleSheetManager } from 'styled-components'\n\nexport default function StyledComponentsRegistry({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [styledComponentsStyleSheet] = useState(() => new ServerStyleSheet())\n  \n  useServerInsertedHTML(() => {\n    const styles = styledComponentsStyleSheet.getStyleElement()\n    styledComponentsStyleSheet.instance.clearTag()\n    return <>{styles}</>\n  })\n  \n  return (\n    <StyleSheetManager sheet={styledComponentsStyleSheet.instance}>\n      {children}\n    </StyleSheetManager>\n  )\n}\n\n// components/Button.tsx\n'use client'\nimport styled from 'styled-components'\n\nconst StyledButton = styled.button`\n  padding: 12px 24px;\n  background: ${props => props.theme.primary};\n  color: white;\n  border: none;\n  border-radius: 8px;\n`\n\nexport default function Button({ children }) {\n  return <StyledButton>{children}</StyledButton>\n}"
      },
      "explanation": "Styled-components: requires registry. 'use client' is mandatory. Performance hit."
    },
    {
      "type": "text",
      "title": "Font Optimization",
      "paragraphs": [
        "<strong>next/font (built-in, recommended):</strong>",
        "‚Ä¢ Automatic font download at build-time",
        "‚Ä¢ Self-hosted (no external requests to Google Fonts)",
        "‚Ä¢ Zero layout shift (automatic size adjustment)",
        "‚Ä¢ Automatic subset (only used characters)",
        "",
        "<strong>Google Fonts:</strong>",
        "<code>import { Inter } from 'next/font/google'</code>",
        "",
        "<strong>Local Fonts:</strong>",
        "<code>import localFont from 'next/font/local'</code>",
        "",
        "<strong>Advantages:</strong>",
        "‚Ä¢ Performance: no FOUT (Flash of Unstyled Text)",
        "‚Ä¢ Privacy: self-hosted font",
        "‚Ä¢ Automatic optimization",
        "",
        "<strong>CSS Variables:</strong>",
        "Font exposed as a CSS variable, usable anywhere"
      ],
      "ironicClosing": "next/font: Google Fonts without Google. Privacy and performance. Win-win."
    },
    {
      "type": "title",
      "title": "Performance",
      "subtitle": "Image optimization, lazy loading, code splitting",
      "description": "Best practices for super fast apps"
    },
    {
      "type": "code",
      "title": "üíª Image Optimization",
      "code": {
        "language": "typescript",
        "snippet": "// next/image - Automatic optimization\nimport Image from 'next/image'\n\nexport default function ProductPage() {\n  return (\n    <div>\n      {/* Immagine esterna */}\n      <Image\n        src=\"https://example.com/photo.jpg\"\n        alt=\"Product\"\n        width={800}\n        height={600}\n        priority  // LCP image (above fold)\n      />\n      \n      {/* Immagine locale */}\n      <Image\n        src=\"/images/hero.jpg\"\n        alt=\"Hero\"\n        width={1200}\n        height={800}\n        quality={90}  // Default: 75\n        placeholder=\"blur\"  // Blur placeholder\n        blurDataURL=\"data:image/jpeg;base64,...\"\n      />\n      \n      {/* Fill (object-fit) */}\n      <div style={{ position: 'relative', width: '100%', height: '400px' }}>\n        <Image\n          src=\"/bg.jpg\"\n          alt=\"Background\"\n          fill\n          style={{ objectFit: 'cover' }}\n        />\n      </div>\n    </div>\n  )\n}\n\n// ‚úÖ Ottimizzazioni automatiche:\n// - Resize, format (WebP/AVIF), quality\n// - Lazy loading (eccetto priority)\n// - Responsive images (srcset)"
      },
      "explanation": "next/image: automatic optimization. WebP/AVIF, lazy load, responsive. Essential."
    },
    {
      "type": "code",
      "title": "üíª Dynamic Imports & Code Splitting",
      "code": {
        "language": "typescript",
        "snippet": "// Lazy load componente pesante\nimport dynamic from 'next/dynamic'\n\n// Con loading state\nconst HeavyChart = dynamic(() => import('@/components/HeavyChart'), {\n  loading: () => <p>Loading chart...</p>,\n  ssr: false, // Disabilita SSR per questo component (solo client)\n})\n\n// Con named export\nconst DynamicComponent = dynamic(\n  () => import('@/components/Dashboard').then((mod) => mod.Dashboard)\n)\n\nexport default function AnalyticsPage() {\n  return (\n    <div>\n      <h1>Analytics</h1>\n      {/* HeavyChart caricato solo quando necessario */}\n      <HeavyChart data={data} />\n    </div>\n  )\n}\n\n// Conditional import\nexport default function Page() {\n  const [showModal, setShowModal] = useState(false)\n  \n  const handleOpenModal = async () => {\n    const { Modal } = await import('@/components/Modal')\n    setShowModal(true)\n  }\n  \n  return <button onClick={handleOpenModal}>Open Modal</button>\n}"
      },
      "explanation": "dynamic() for lazy loading. Reduces initial bundle. ssr: false for client-only."
    },
    {
      "type": "code",
      "title": "üíª Metadata API (SEO)",
      "code": {
        "language": "typescript",
        "snippet": "// app/layout.tsx (static metadata)\nimport type { Metadata } from 'next'\n\nexport const metadata: Metadata = {\n  title: 'My Next.js App',\n  description: 'An awesome Next.js 16 application',\n  openGraph: {\n    title: 'My Next.js App',\n    description: 'An awesome Next.js 16 application',\n    images: ['/og-image.jpg'],\n  },\n}\n\n// app/blog/[slug]/page.tsx (dynamic metadata)\nexport async function generateMetadata(\n  { params }: { params: { slug: string } }\n): Promise<Metadata> {\n  const post = await fetchPost(params.slug)\n  \n  return {\n    title: post.title,\n    description: post.excerpt,\n    openGraph: {\n      title: post.title,\n      description: post.excerpt,\n      images: [post.coverImage],\n    },\n    twitter: {\n      card: 'summary_large_image',\n      title: post.title,\n      description: post.excerpt,\n      images: [post.coverImage],\n    },\n  }\n}"
      },
      "explanation": "Metadata API for SEO. Static or dynamic (generateMetadata). OG tags, Twitter cards."
    },
    {
      "type": "code",
      "title": "üíª Route Handlers (API Routes)",
      "code": {
        "language": "typescript",
        "snippet": "// app/api/posts/route.ts\nimport { NextRequest } from 'next/server'\nimport { db } from '@/lib/db'\n\n// GET /api/posts\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams\n  const page = searchParams.get('page') || '1'\n  \n  const posts = await db.post.findMany({\n    skip: (parseInt(page) - 1) * 10,\n    take: 10,\n  })\n  \n  return Response.json(posts)\n}\n\n// POST /api/posts\nexport async function POST(request: NextRequest) {\n  const body = await request.json()\n  \n  const post = await db.post.create({\n    data: body,\n  })\n  \n  return Response.json(post, { status: 201 })\n}\n\n// app/api/posts/[id]/route.ts\n// GET /api/posts/:id\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  const post = await db.post.findUnique({ where: { id: params.id } })\n  return Response.json(post)\n}"
      },
      "explanation": "Route handlers for API. GET, POST, PUT, DELETE. Web Standard Response."
    },
    {
      "type": "code",
      "title": "üíª Sitemap & Robots.txt",
      "code": {
        "language": "typescript",
        "snippet": "// app/sitemap.ts\nimport { MetadataRoute } from 'next'\n\nexport default async function sitemap(): Promise<MetadataRoute.Sitemap> {\n  const posts = await fetchAllPosts()\n  \n  const postUrls = posts.map((post) => ({\n    url: `https://example.com/blog/${post.slug}`,\n    lastModified: post.updatedAt,\n    changeFrequency: 'weekly' as const,\n    priority: 0.8,\n  }))\n  \n  return [\n    {\n      url: 'https://example.com',\n      lastModified: new Date(),\n      changeFrequency: 'yearly',\n      priority: 1,\n    },\n    {\n      url: 'https://example.com/about',\n      lastModified: new Date(),\n      changeFrequency: 'monthly',\n      priority: 0.8,\n    },\n    ...postUrls,\n  ]\n}\n\n// app/robots.ts\nimport { MetadataRoute } from 'next'\n\nexport default function robots(): MetadataRoute.Robots {\n  return {\n    rules: {\n      userAgent: '*',\n      allow: '/',\n      disallow: '/private/',\n    },\n    sitemap: 'https://example.com/sitemap.xml',\n  }\n}"
      },
      "explanation": "sitemap.ts and robots.ts for SEO. Auto-generated, type-safe. Production-ready."
    },
    {
      "type": "code",
      "title": "üíª Analytics & Web Vitals",
      "code": {
        "language": "typescript",
        "snippet": "// app/layout.tsx\nimport { Analytics } from '@vercel/analytics/react'\nimport { SpeedInsights } from '@vercel/speed-insights/next'\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        {children}\n        <Analytics />        {/* Vercel Analytics */}\n        <SpeedInsights />    {/* Speed Insights */}\n      </body>\n    </html>\n  )\n}\n\n// Custom Web Vitals reporting\n// app/web-vitals.tsx\n'use client'\n\nimport { useReportWebVitals } from 'next/web-vitals'\n\nexport function WebVitals() {\n  useReportWebVitals((metric) => {\n    // Log to console\n    console.log(metric)\n    \n    // Send to analytics\n    // window.gtag('event', metric.name, {\n    //   value: Math.round(metric.value),\n    //   metric_id: metric.id,\n    //   metric_value: metric.value,\n    //   metric_delta: metric.delta,\n    // })\n  })\n  \n  return null\n}"
      },
      "explanation": "Built-in analytics (Vercel). Web Vitals tracking. Performance monitoring."
    },
    {
      "type": "title",
      "title": "Metadata & SEO",
      "subtitle": "Open Graph, Twitter Cards, JSON-LD",
      "description": "Perfect SEO with Metadata API"
    },
    {
      "type": "code",
      "title": "üíª Complete Metadata",
      "code": {
        "language": "typescript",
        "snippet": "// app/blog/[slug]/page.tsx\nimport type { Metadata } from 'next'\n\ntype Props = {\n  params: { slug: string }\n}\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  const post = await fetchPost(params.slug)\n  \n  return {\n    title: post.title,\n    description: post.excerpt,\n    authors: [{ name: post.author }],\n    keywords: post.tags,\n    \n    // Open Graph\n    openGraph: {\n      type: 'article',\n      title: post.title,\n      description: post.excerpt,\n      url: `https://example.com/blog/${post.slug}`,\n      images: [{\n        url: post.coverImage,\n        width: 1200,\n        height: 630,\n        alt: post.title,\n      }],\n      publishedTime: post.publishedAt,\n      authors: [post.author],\n    },\n    \n    // Twitter\n    twitter: {\n      card: 'summary_large_image',\n      title: post.title,\n      description: post.excerpt,\n      images: [post.coverImage],\n      creator: '@username',\n    },\n  }\n}"
      },
      "explanation": "Complete metadata: title, description, OG, Twitter. Perfect SEO + social sharing."
    },
    {
      "type": "code",
      "title": "üíª JSON-LD (Schema.org)",
      "code": {
        "language": "typescript",
        "snippet": "// app/blog/[slug]/page.tsx\nexport default async function BlogPost({ params }: Props) {\n  const post = await fetchPost(params.slug)\n  \n  const jsonLd = {\n    '@context': 'https://schema.org',\n    '@type': 'BlogPosting',\n    headline: post.title,\n    description: post.excerpt,\n    image: post.coverImage,\n    datePublished: post.publishedAt,\n    dateModified: post.updatedAt,\n    author: {\n      '@type': 'Person',\n      name: post.author,\n    },\n  }\n  \n  return (\n    <>\n      <script\n        type=\"application/ld+json\"\n        dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }}\n      />\n      \n      <article>\n        <h1>{post.title}</h1>\n        <div dangerouslySetInnerHTML={{ __html: post.content }} />\n      </article>\n    </>\n  )\n}\n\n// Rich snippets per Google Search (stelle, breadcrumb, FAQ, etc.)"
      },
      "explanation": "JSON-LD for structured data. Google rich snippets. Advanced SEO."
    },
    {
      "type": "code",
      "title": "üíª Canonical URLs & Alternate Languages",
      "code": {
        "language": "typescript",
        "snippet": "// app/blog/[slug]/page.tsx\nimport type { Metadata } from 'next'\n\nexport async function generateMetadata({ params }: Props): Promise<Metadata> {\n  return {\n    title: 'My Post',\n    \n    // Canonical URL (evita duplicate content)\n    alternates: {\n      canonical: `https://example.com/blog/${params.slug}`,\n      \n      // Alternate languages (i18n)\n      languages: {\n        'en-US': `https://example.com/en/blog/${params.slug}`,\n        'it-IT': `https://example.com/it/blog/${params.slug}`,\n        'es-ES': `https://example.com/es/blog/${params.slug}`,\n      },\n    },\n    \n    // Robots directives\n    robots: {\n      index: true,\n      follow: true,\n      nocache: false,\n      googleBot: {\n        index: true,\n        follow: true,\n        'max-video-preview': -1,\n        'max-image-preview': 'large',\n        'max-snippet': -1,\n      },\n    },\n  }\n}"
      },
      "explanation": "Canonical for duplicate content. Alternate languages for i18n. Robots directives."
    },
    {
      "type": "text",
      "title": "SEO Best Practices Next.js",
      "paragraphs": [
        "<strong>1. Server Components for SEO content</strong>",
        "‚Ä¢ Complete HTML on first load",
        "‚Ä¢ Crawlers see content immediately",
        "",
        "<strong>2. Always Metadata API</strong>",
        "‚Ä¢ generateMetadata for dynamic pages",
        "‚Ä¢ Open Graph + Twitter cards mandatory",
        "",
        "<strong>3. Semantic HTML</strong>",
        "‚Ä¢ <code>&lt;article&gt;</code>, <code>&lt;section&gt;</code>, <code>&lt;nav&gt;</code>, <code>&lt;header&gt;</code>",
        "‚Ä¢ Heading hierarchy (h1 ‚Üí h2 ‚Üí h3)",
        "",
        "<strong>4. Image optimization</strong>",
        "‚Ä¢ next/image for all images",
        "‚Ä¢ Descriptive alt text",
        "",
        "<strong>5. Performance</strong>",
        "‚Ä¢ Core Web Vitals (LCP, FID, CLS)",
        "‚Ä¢ Lighthouse score > 90",
        "",
        "<strong>6. Sitemap + robots.txt</strong>",
        "‚Ä¢ sitemap.ts for crawling",
        "‚Ä¢ robots.ts for directives"
      ],
      "ironicClosing": "SEO Next.js: Server Components + Metadata API = Google loves you. Simple as that."
    },
    {
      "type": "title",
      "title": "Deployment",
      "subtitle": "Vercel, self-hosted, Docker",
      "description": "From zero to production in 5 minutes"
    },
    {
      "type": "text",
      "title": "Deployment Options",
      "paragraphs": [
        "<strong>1. Vercel (recommended, zero-config)</strong>",
        "‚Ä¢ Push to git ‚Üí auto-deploy",
        "‚Ä¢ Edge Functions, Analytics, Speed Insights built-in",
        "‚Ä¢ Preview deployments for each PR",
        "‚Ä¢ Generous free tier",
        "",
        "<strong>2. Self-hosted (Node.js server)</strong>",
        "‚Ä¢ <code>next build</code> + <code>next start</code>",
        "‚Ä¢ Any VPS (DigitalOcean, AWS EC2, etc.)",
        "‚Ä¢ PM2 or Docker for process management",
        "",
        "<strong>3. Static Export</strong>",
        "‚Ä¢ <code>next build</code> with <code>output: 'export'</code>",
        "‚Ä¢ Deploy on Netlify, Cloudflare Pages, S3",
        "‚Ä¢ Limitations: no Server Components, no API routes",
        "",
        "<strong>4. Docker</strong>",
        "‚Ä¢ Containerized deployment",
        "‚Ä¢ Kubernetes, AWS ECS, Google Cloud Run",
        "",
        "<strong>5. Edge (Cloudflare Workers, Deno Deploy)</strong>",
        "‚Ä¢ Ultra low latency",
        "‚Ä¢ Runtime limitations"
      ],
      "ironicClosing": "Deployment: Vercel for simplicity, self-hosted for control. Pick your poison."
    },
    {
      "type": "code",
      "title": "üíª Vercel Deployment",
      "code": {
        "language": "bash",
        "snippet": "# 1. Installa Vercel CLI\nnpm i -g vercel\n\n# 2. Login\nvercel login\n\n# 3. Deploy\nvercel\n\n# 4. Production deploy\nvercel --prod\n\n# ===== O via Git (raccomandato) =====\n# 1. Push to GitHub/GitLab/Bitbucket\ngit push origin main\n\n# 2. Import su vercel.com\n# - Connetti repo\n# - Auto-detect Next.js\n# - Deploy!\n\n# ===== Environment Variables =====\n# vercel.com ‚Üí Project Settings ‚Üí Environment Variables\n# O via CLI:\nvercel env add DATABASE_URL\n\n# ===== Custom Domain =====\n# vercel.com ‚Üí Project Settings ‚Üí Domains\n# Add custom domain + DNS setup\n\n# ‚úÖ Features Vercel:\n# - Preview deployments per PR\n# - Analytics\n# - Edge Functions\n# - Image Optimization\n# - Zero config"
      },
      "explanation": "Vercel: push git ‚Üí deployed. Zero config. Preview for PR. Built-in analytics."
    },
    {
      "type": "code",
      "title": "üíª Self-Hosted (Node.js)",
      "code": {
        "language": "bash",
        "snippet": "# 1. Build production\nnpm run build\n\n# 2. Start server\nnpm start\n# Server su http://localhost:3000\n\n# ===== Con PM2 (process manager) =====\nnpm install -g pm2\n\n# Start\npm2 start npm --name \"nextjs-app\" -- start\n\n# Status\npm2 status\n\n# Logs\npm2 logs nextjs-app\n\n# Restart\npm2 restart nextjs-app\n\n# Auto-restart on crash\npm2 startup\npm2 save\n\n# ===== Nginx Reverse Proxy =====\n# /etc/nginx/sites-available/myapp\nserver {\n  listen 80;\n  server_name example.com;\n\n  location / {\n    proxy_pass http://localhost:3000;\n    proxy_http_version 1.1;\n    proxy_set_header Upgrade $http_upgrade;\n    proxy_set_header Connection 'upgrade';\n    proxy_set_header Host $host;\n    proxy_cache_bypass $http_upgrade;\n  }\n}"
      },
      "explanation": "Self-hosted: build + start. PM2 for process management. Nginx for reverse proxy."
    },
    {
      "type": "code",
      "title": "üíª Docker Deployment",
      "code": {
        "language": "dockerfile",
        "snippet": "# Dockerfile (multi-stage)\nFROM node:20-alpine AS base\n\n# Dependencies\nFROM base AS deps\nRUN apk add --no-cache libc6-compat\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\n\n# Builder\nFROM base AS builder\nWORKDIR /app\nCOPY --from=deps /app/node_modules ./node_modules\nCOPY . .\nRUN npm run build\n\n# Runner\nFROM base AS runner\nWORKDIR /app\nENV NODE_ENV production\n\nRUN addgroup --system --gid 1001 nodejs\nRUN adduser --system --uid 1001 nextjs\n\nCOPY --from=builder /app/public ./public\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\n\nUSER nextjs\nEXPOSE 3000\nENV PORT 3000\n\nCMD [\"node\", \"server.js\"]\n\n# docker build -t nextjs-app .\n# docker run -p 3000:3000 nextjs-app"
      },
      "explanation": "Docker: multi-stage build. Standalone output. Production-ready container."
    },
    {
      "type": "code",
      "title": "üíª Environment Variables",
      "code": {
        "language": "bash",
        "snippet": "# .env.local (development, gitignored)\nDATABASE_URL=postgresql://...\nNEXT_PUBLIC_API_URL=http://localhost:3000/api\nSECRET_KEY=super-secret\n\n# .env.production (production)\nDATABASE_URL=postgresql://prod...\nNEXT_PUBLIC_API_URL=https://api.example.com\nSECRET_KEY=prod-secret\n\n# ===== Next.js conventions =====\n# NEXT_PUBLIC_* - Exposed to browser (build-time)\n# Other vars - Server-side only (runtime)\n\n// In code:\n// Server Component/API Route\nconst secret = process.env.SECRET_KEY // ‚úÖ Server-only\n\n// Client Component\nconst apiUrl = process.env.NEXT_PUBLIC_API_URL // ‚úÖ Exposed\n// const secret = process.env.SECRET_KEY // ‚ùå undefined (not exposed)\n\n# ===== Vercel =====\n# Add via dashboard o CLI\nvercel env add DATABASE_URL\n\n# ===== Docker =====\n# docker run -e DATABASE_URL=... nextjs-app\n\n# ===== Security =====\n# NEVER commit .env files (use .gitignore)\n# Use secret managers in production (AWS Secrets, Vault)"
      },
      "explanation": "NEXT_PUBLIC_* for client. Others for server. .env.local gitignored. Security first."
    },
    {
      "type": "title",
      "title": "Next.js 16: News 2025",
      "subtitle": "Cache Components, Turbopack, React Compiler",
      "description": "Cutting-edge features of Next.js 16"
    },
    {
      "type": "code",
      "title": "üíª Cache Components (use cache)",
      "code": {
        "language": "typescript",
        "snippet": "// app/products/page.tsx\n'use cache' // ‚¨ÖÔ∏è Opt-in caching (Next.js 16)\n\nimport { db } from '@/lib/db'\n\nexport default async function ProductsPage() {\n  // Questo component √® cached con PPR\n  const products = await db.product.findMany()\n  \n  return (\n    <div>\n      {products.map((product) => (\n        <ProductCard key={product.id} product={product} />\n      ))}\n    </div>\n  )\n}\n\n// Fine-grained caching\nasync function fetchProducts() {\n  'use cache'\n  return await db.product.findMany()\n}\n\n// ‚úÖ Next.js 16 philosophy:\n// - Dynamic by default (no cache)\n// - 'use cache' per opt-in\n// - Partial Pre-Rendering (PPR) per mix static/dynamic\n\n// ‚ùå Pre-Next.js 16:\n// - Static by default (cache implicita)\n// - { cache: 'no-store' } per opt-out\n// - Confusing per developers"
      },
      "explanation": "'use cache' directive for explicit caching. PPR for static + dynamic mix."
    },
    {
      "type": "text",
      "title": "üöÄ Turbopack Stable (Production)",
      "paragraphs": [
        "<strong>What is Turbopack:</strong>",
        "‚Ä¢ Successor to Webpack, written in Rust",
        "‚Ä¢ Ultra-fast build tool (up to 700x faster)",
        "‚Ä¢ Incremental bundling (only changed files)",
        "",
        "<strong>Next.js 16 - Stable Production:</strong>",
        "‚Ä¢ Default bundler for dev and production",
        "‚Ä¢ File system caching (beta) for super-fast startup",
        "‚Ä¢ Instant HMR (Hot Module Replacement)",
        "",
        "<strong>Performance:</strong>",
        "‚Ä¢ Dev server startup: ~10x faster",
        "‚Ä¢ Hot reload: <50ms (vs 1-2s Webpack)",
        "‚Ä¢ Production build: ~5x faster",
        "",
        "<strong>How to use it:</strong>",
        "‚Ä¢ Next.js 16: enabled by default",
        "‚Ä¢ No config needed",
        "",
        "<strong>Optional (file system cache):</strong>",
        "<code>next.config.mjs:</code>",
        "<code>experimental: { turbo: { unstable_cache: true } }</code>"
      ],
      "ironicClosing": "Turbopack: Webpack but in Rust and 700x faster. Rust hype justified."
    },
    {
      "type": "text",
      "title": "‚öõÔ∏è React Compiler (Built-in)",
      "paragraphs": [
        "<strong>What is React Compiler:</strong>",
        "‚Ä¢ Automatic memoization at compile-time",
        "‚Ä¢ Eliminates the need for manual useMemo/useCallback",
        "‚Ä¢ Automatically optimizes re-rendering",
        "",
        "<strong>Next.js 16 Integration:</strong>",
        "‚Ä¢ Built-in, stable support",
        "‚Ä¢ Enable in next.config.mjs",
        "",
        "<strong>Advantages:</strong>",
        "‚Ä¢ Cleaner code (no useMemo everywhere)",
        "‚Ä¢ Automatically improved performance",
        "‚Ä¢ Reduced mental overhead",
        "",
        "<strong>How to enable:</strong>",
        "<code>// next.config.mjs</code>",
        "<code>export default {</code>",
        "<code>  experimental: {</code>",
        "<code>    reactCompiler: true,</code>",
        "<code>  },</code>",
        "<code>}</code>",
        "",
        "<strong>Effect:</strong>",
        "React Compiler analyzes components and adds memoization where needed."
      ],
      "ironicClosing": "React Compiler: useMemo/useCallback are obsolete. The compiler does the work. Finally."
    },
    {
      "type": "code",
      "title": "üíª Enhanced Routing APIs",
      "code": {
        "language": "typescript",
        "snippet": "// Next.js 16: Nuove cache APIs\nimport { updateTag, revalidateTag, refresh } from 'next/cache'\n\n// updateTag() - Update cache tag\nexport async function updateProduct(id: string) {\n  'use server'\n  \n  await db.product.update({ where: { id }, data: { ... } })\n  \n  // Update cache tag (nuovo in v16)\n  updateTag(`product-${id}`)\n}\n\n// revalidateTag() - Invalidate cache tag\nexport async function deleteProduct(id: string) {\n  'use server'\n  \n  await db.product.delete({ where: { id } })\n  revalidateTag(`product-${id}`)\n  revalidateTag('products') // Invalidate list\n}\n\n// refresh() - Force refresh current page\n'use client'\nimport { useRouter } from 'next/navigation'\n\nexport function RefreshButton() {\n  const router = useRouter()\n  \n  return (\n    <button onClick={() => router.refresh()}>\n      Refresh Data\n    </button>\n  )\n}\n\n// ‚úÖ Fine-grained cache control\n// ‚úÖ Predictable revalidation"
      },
      "explanation": "updateTag() for cache updates. revalidateTag() refined. refresh() to force reload."
    },
    {
      "type": "text",
      "title": "üîß Build Adapters API (Alpha)",
      "paragraphs": [
        "<strong>What are Build Adapters:</strong>",
        "‚Ä¢ API for custom build integrations",
        "‚Ä¢ Hook into build process",
        "‚Ä¢ Custom output formats for deployment platforms",
        "",
        "<strong>Use cases:</strong>",
        "‚Ä¢ Deploy platform integrations (AWS, GCP, Azure)",
        "‚Ä¢ Custom build output (edge workers, lambda)",
        "‚Ä¢ Customizzazione del processo di build",
        "",
        "<strong>Status:</strong>",
        "‚Ä¢ Alpha in Next.js 16",
        "‚Ä¢ Experimental, API subject to change",
        "",
        "<strong>Example:</strong>",
        "<code>// next.config.mjs</code>",
        "<code>export default {</code>",
        "<code>  experimental: {</code>",
        "<code>    buildAdapter: 'aws-lambda',</code>",
        "<code>  },</code>",
        "<code>}</code>",
        "",
        "<strong>Future:</strong>",
        "Community adapters for each platform"
      ],
      "ironicClosing": "Build Adapters: Next.js everywhere. Vercel, AWS, GCP, edge, toaster. Everywhere."
    },
    {
      "type": "title",
      "title": "Best Practices 2025",
      "subtitle": "Modern patterns and anti-patterns",
      "description": "How to write production-ready Next.js"
    },
    {
      "type": "text",
      "title": "‚úÖ Best Practices Next.js 16",
      "paragraphs": [
        "<strong>1. Server Components by default</strong>",
        "‚Ä¢ 'use client' only when necessary (interactivity, hooks)",
        "‚Ä¢ Composition pattern: Server wraps Client",
        "",
        "<strong>2. Data fetching in Server Components</strong>",
        "‚Ä¢ async/await directly in the component",
        "‚Ä¢ No API routes for internal data (only for third-party)",
        "",
        "<strong>3. Server Actions for mutations</strong>",
        "‚Ä¢ Forms, mutations, revalidation",
        "‚Ä¢ Type-safe, no API routes boilerplate",
        "",
        "<strong>4. Cache opt-in (Next.js 16)</strong>",
        "‚Ä¢ Dynamic by default",
        "‚Ä¢ Explicit 'use cache' where needed",
        "",
        "<strong>5. Always image optimization</strong>",
        "‚Ä¢ next/image for each image",
        "‚Ä¢ priority for LCP images",
        "",
        "<strong>6. Always Metadata API</strong>",
        "‚Ä¢ generateMetadata for dynamic pages",
        "‚Ä¢ OG tags + Twitter cards are mandatory",
        "",
        "<strong>7. Error handling</strong>",
        "‚Ä¢ error.tsx for error boundaries",
        "‚Ä¢ loading.tsx for loading states",
        "",
        "<strong>8. TypeScript</strong>",
        "‚Ä¢ Type-safe end-to-end",
        "‚Ä¢ Strict mode enabled"
      ],
      "ironicClosing": "Best practices: follow these and ship fast. Ignore and debug for weeks. Your call."
    },
    {
      "type": "text",
      "title": "‚ùå Anti-Patterns to Avoid",
      "paragraphs": [
        "<strong>1. 'use client' too high up</strong>",
        "‚ùå entire page.tsx with 'use client'",
        "‚úÖ Only interactive leaf components",
        "",
        "<strong>2. Fetch in Client Components (when avoidable)</strong>",
        "‚ùå useEffect + fetch for data loading",
        "‚úÖ Server Component async fetch (when possible)",
        "",
        "<strong>3. API routes for internal data</strong>",
        "‚ùå Server Component ‚Üí API route ‚Üí Database",
        "‚úÖ Server Component ‚Üí Database directly",
        "",
        "<strong>4. Lack of error boundaries</strong>",
        "‚ùå No error.tsx (errors crash the app)",
        "‚úÖ error.tsx for error handling",
        "",
        "<strong>5. Images without optimization</strong>",
        "‚ùå <code>&lt;img src=...&gt;</code>",
        "‚úÖ <code>&lt;Image /&gt;</code> from next/image",
        "",
        "<strong>6. Secrets in the client</strong>",
        "‚ùå <code>NEXT_PUBLIC_SECRET_KEY</code>",
        "‚úÖ Secrets only on the server-side (no NEXT_PUBLIC)",
        "",
        "<strong>7. Large dependencies in Client Components</strong>",
        "‚ùå Heavy library in 'use client' (bundle bloat)",
        "‚úÖ Dynamic import or Server Component"
      ],
      "ironicClosing": "Anti-patterns: know your enemy. Avoid and thrive. Ship fast, debug less."
    },
    {
      "type": "text",
      "title": "üéØ When to Use Next.js",
      "paragraphs": [
        "<strong>‚úÖ Perfect fit:</strong>",
        "‚Ä¢ Marketing websites (SEO critical)",
        "‚Ä¢ E-commerce (performance + SEO)",
        "‚Ä¢ Blogs, documentation sites",
        "‚Ä¢ SaaS applications",
        "‚Ä¢ Dashboards (mix static + dynamic)",
        "‚Ä¢ Any React app that needs SEO",
        "",
        "<strong>‚ö†Ô∏è Consider alternatives:</strong>",
        "‚Ä¢ Pure SPA without SEO needs ‚Üí Vite + React",
        "‚Ä¢ Real-time collaboration ‚Üí WebSockets heavy (consider dedicated server)",
        "‚Ä¢ Electron apps ‚Üí Electron + Vite",
        "",
        "<strong>‚ùå Do not use Next.js for:</strong>",
        "‚Ä¢ Native mobile apps (uses React Native)",
        "‚Ä¢ Pure static sites without dynamic (use Astro)",
        "‚Ä¢ Backend-only API (uses Express, Fastify)",
        "",
        "<strong>General rule:</strong>",
        "If you have React + need SEO/performance ‚Üí Next.js",
        "If you have React + no SEO needs ‚Üí Vite might be enough.",
        "If you don't have React ‚Üí consider something else"
      ],
      "ironicClosing": "Next.js: the definitive React framework for 90% of use cases. The remaining 10%? There are alternatives."
    }
  ],
  "sourceLanguage": "en",
  "lastTranslated": "2025-11-18"
}